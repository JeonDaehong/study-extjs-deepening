<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.market.mapper.ProductMapper">

    <select id="getProductCount" resultType="Long">
        SELECT COUNT(1) FROM PRODUCT;
    </select>

    <insert id="addProduct">
        INSERT INTO PRODUCT ( itemNm, itemPrc, itemAmt, itemRegDt )
        VALUES ( #{itemNm}, #{itemPrc}, #{itemAmt}, #{createDateTime} )
    </insert>

    <update id="updateProduct">
        UPDATE PRODUCT SET itemNm = #{itemNm}, itemPrc = #{itemPrc}, itemAmt = #{itemAmt}, itemRegDt = #{updateDateTime}
        WHERE itemSeq = #{itemSeq}
    </update>

    <delete id="deleteProduct">
        DELETE FROM PRODUCT WHERE itemSeq = #{itemSeq}
    </delete>

    <select id="getProductList" resultType="com.example.market.dto.ProductDto">
        SELECT * FROM PRODUCT
        <where>
            <if test="searchProductNm != null and searchProductNm != ''">
                AND itemNm LIKE CONCAT('%', #{searchProductNm}, '%')
            </if>
        </where>
        LIMIT #{start}, #{limit};
    </select>


</mapper>